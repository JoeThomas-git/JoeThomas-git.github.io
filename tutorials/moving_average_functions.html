<!-- Universal content start -->
<html>
<style>
  h1{
    font-family:  sans-serif;
    color: black;
    background-color: white;
    }
  h2{
    font-family: sans-serif;
    color: black;
    background-color: white;
    }
  h3{
    font-family: sans-serif;
    color: black;
    background-color: white;
    }
  p {
    font-family: sans-serif;
    color: black;
    background-color: white;
    }
  hr{
    color: black;
    }
  a {
    font-family: sans-serif;
    color:black;
    background-color: white;
  }
  .sidenav {
    height: 100%;
    width: 160px;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: white;
    overflow-x: hidden;
    padding-top: 20px;
    font-family: sans-serif;
    }
  .sidenav a {
    padding: 6px 8px 6px 8px;
    text-decoration: none;
    color: black;
    display: block;
    font-family: sans-serif;
    background-color: grey;
    }
  .sidenav a:hover {
    color: #f1f1f1;
    font-family: sans-serif;
    background-color: grey;
    }
  .main {
    margin-left: 160px; /* Same as the width of the sidenav */
    padding: 0px 10px;
    font-family: sans-serif;
    }
</style>
<!-- Top bar of links start -->
<header align="center" class="main">
<a href='../index.html'>home</a>
|
<a href='../code.html'>code portfolio</a>
|
<a href='../about_me.html'>about me</a>
<br>
<hr>
</header>
<!-- Top bar of links end -->
<!-- side bar text start-->
<div class="sidenav">
  <a href="../about_me.html">About me</a>
  <a href="../code.html">R code</a>
  <a style="margin-left:5px" href="moving_average_functions.html"><li>moving average</li></a>
  <a style="margin-left:5px" href="moving_correlation_functions.html"><li>moving correlations</li></a>
  <a style="margin-left:5px" href="binning_functions.html"><li>binning data</li></a>
  <a href="google.com">Python code</a>
</div>
<!-- side bar text end -->
<div class="main">
<!-- Individual page content start -->
<h1>
  Calculate moving averages in R
</h1>
<br>
<p>
  This activity is based on the 'rollingMean' function from the <em>joethomasRfunctions</em> package for R. Click <a href="../code.html">here</a> if you need instructions on how to install the package from GitHub.
</p>
<br>
<hr>
<body>
<h2>
  Why calculate a moving average?
</h2>
<p>
  A moving average is an average (mean) value that is calculated across a 'window' of values of a specific length.
</p>
<center>
<img src="../images/moving_average_numbers.png" alt="moving_average_image" width= 300px height= 100px>
</center>
<p>Let's pretend we are recording the number of
  customers in a bakery, every hour, for 5 hours.
  <br>
  <br>
  Based on the data above there were:
  <li>3 customers during hour 1
  <li>8 customers during hour 2
  <li>6 customers during hour 3
  <li>2 customers during hour 4
  <li>3 customers during hour 5
  <br>
  <br>
  What if you wanted to know which 3 hour period had the highest number of customers?
  <br>
  <br>
<center>
<img src="../images/moving_average_windows.png" alt="moving_average_windows" width=300px height=120px>
</center>
  To acomplish this, we need to seperate the data into 3 hour intervals or 'windows' that are 3 data points wide.
  The image above is a visualization of this, with black, red, and blue outlined windows of data, each with 3 data points.
  Notice that these windows overlap. This is a good thing! It allows us to consider all possible 3 hour windows to find the one with the highest number of customers.
  <br>
  <br>
  The final step is to calculate an average (mean) value for each of the windows.
  <br>
  <br>
  <center>
    <img src="../images/moving_average_averages.png" alt="moving_average_averages" width=300px height=180px>
  </center>
  Based on the mean values calculated for each three hour window, we can now conclude that between the hours of 2-4, the highest number of customers visit the bakery.
</p>
</body>
<br>
<hr>
<br>
<h2>
  How to calculate a moving average using R.
</h2>
<p>
  There is a function in the <em>joethomasRfunctions</em> package that calculates moving averages for you.
  <br>
  <br>
  Make sure the first require the package.
  <br>
  <img src="../images/library_joethomasRfunctions.png" alt="library_the_pacakge" width=400px height=35px>
  <br>
  Now use the 'rollingMean' function to calculate the moving averages.
  <br>
  <br>
  <img src="../images/moving_average_R_code.png" alt="moving_average_code" width=600px height=28px>
  <br>
  There are two inputs for this function.
  <br>
  <ol>
    <li>data
      <br><em>A series of values.</em>
      <br>
      <br>
    <li>windowWidth
      <br><em>The width of the window you wish you calculate an average value. For the example above, windowWidth would equal 3.</em>
  </ol>
<br>
That's it!
<!--Individual page content end -->
</div>
</html>
<!-- Universal content end -->
